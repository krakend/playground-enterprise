(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7089],{6286:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/use-cases/git-user",function(){return t(6824)}])},6824:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return a}});var s=t(5893),r=t(1644),o=t(8563),i=t(8113);let c=function(e){let{children:n}=e;return(0,s.jsx)(o.Z,{children:n})};function l(e){let n={code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",...(0,r.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{children:"Endpoint"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-http",children:"/git/{user}\n"})}),"\n",(0,s.jsx)(n.h2,{children:"How aggregation works"}),"\n",(0,s.jsxs)(n.p,{children:["When a user calls ",(0,s.jsx)(n.code,{children:"/git/{user}"}),", KrakenD connects in parallel to the two ",(0,s.jsx)(n.code,{children:"backend"})," objects defined, which are:"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"https://api.github.com/users/{user}"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"https://api.github.com/users/{user}/repos"})}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["The first backend returns information about the ",(0,s.jsx)(n.code,{children:"{user}"}),", and the second their associated repositories. The information of the two backends is merged into a single response."]}),"\n",(0,s.jsx)(n.h2,{children:"Basic manipulation"}),"\n",(0,s.jsxs)(n.p,{children:["In addition, the first backend only takes a few properties from the response, and the rest are discarded, thanks to the ",(0,s.jsx)(n.code,{children:"allow"})," manipulation. It also renames the field ",(0,s.jsx)(n.code,{children:"blog"})," to ",(0,s.jsx)(n.code,{children:"website"}),", and finally puts the whole response under a new object ",(0,s.jsx)(n.code,{children:"user"}),", thanks to the ",(0,s.jsx)(n.code,{children:"group"})," modifier."]}),"\n",(0,s.jsx)(n.p,{children:"The second backend does not return an object, but an array, so we tell KrakenD that this is a collection of elements."}),"\n",(0,s.jsx)(n.p,{children:"Write an existing GitHub username below, and open the link in the browser or cURL:"}),"\n",(0,s.jsx)(i.Z,{endpoint:"http://localhost:8080/git/",placeholder:"username"})]})}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.jsx)(c,{...e,children:(0,s.jsx)(l,{...e})})}},8113:function(e,n,t){"use strict";var s=t(5893),r=t(7294);n.Z=e=>{let{endpoint:n,placeholder:t,helpText:o}=e,i=(0,r.useRef)(null),[c,l]=(0,r.useState)("Copy"),[a,d]=(0,r.useState)(!1);return(0,s.jsxs)("div",{className:"not-prose",children:[(0,s.jsxs)("div",{className:"bg-white py-2 px-4 rounded-md flex flex-col sm:flex-row sm:items-center sm:justify-between",onClick:()=>{i.current&&i.current.focus()},children:[(0,s.jsxs)("div",{className:"flex text-brand-neutral-600 w-9/12",children:[(0,s.jsx)("p",{children:n||""}),(0,s.jsx)("input",{ref:i,type:"text",placeholder:t,className:"focus:outline-none w-full"})]}),(0,s.jsx)("button",{className:"bg-brand-neutral-900 text-white rounded-md px-6 py-2 mt-4 sm:mt-0 ".concat(a?"bg-blue-500":""),onClick:()=>{var e;let t=(null===(e=i.current)||void 0===e?void 0:e.value)||"",s="".concat(n).concat(t);navigator.clipboard.writeText(s).then(()=>{l("Copied!"),d(!0),setTimeout(()=>{l("Copy"),d(!1)},2e3)}).catch(e=>{console.error("Failed to copy:",e)})},children:c})]}),o&&(0,s.jsx)("small",{className:"mt-2 text-sm font-normal",children:o})]})}}},function(e){e.O(0,[9814,2681,182,6103,2888,9774,179],function(){return e(e.s=6286)}),_N_E=e.O()}]);